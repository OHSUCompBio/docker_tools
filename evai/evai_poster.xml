<tool id="evai_poster" name="eVai Sample Poster" version="1.0.0">
	<description>Uploads VCFs to eVai to analyze</description>
	<requirements>
	</requirements>
	<command><![CDATA[
	#if $ped.selector == "ped"
		ln -s ${dragen_variants} sample.vcf &&
		java -jar \${EVAI_JAR_PATH}/eVaiAnalysisExecutor_2.0.0.jar analyze --vcf -f sample.vcf -n ${sample_id} -pd $ped -tk "`cat ${token_file}`" > ${output_log}
	#else
		ln -s ${dragen_variants} sample.vcf &&
		java -jar \${EVAI_JAR_PATH}/eVaiAnalysisExecutor_2.0.0.jar analyze --vcf -f sample.vcf -n ${sample_id} -tk "`cat ${token_file}`" > ${output_log}
	#end if
	]]>
	</command>
	<inputs>
		<param name="sample_id" type="text" label="Sample ID"/>
		<param name="token_file" type="data" label="eNgenome token"/>
		<param name="dragen_variants" type="data" format="vcf" label="DRAGEN VCF"/>
		<conditional name="ped">
            <param name="selector" type="select" label="Select to launch family analysis">
                <option value="individual" selected="True">Individual</option>
                <option value="ped" selected="True">Family</option>
            </param>
            <when value="ped">
                 <param type="data" name="ped" label="Pedigree file" format="ped"/>
            </when>
	</inputs>

	<outputs>
		<data name="output_log" format="txt" label="log: txt"/>
	</outputs>

	<help></help>
</tool>

