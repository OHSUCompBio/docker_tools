<tool id="evai_vcf_concat" name="eVai VCF concatenate" version="0.0.2">
	<description>Concatenates SV and CNV VCFs for eVai</description>
	<requirements>
        <requirement type="package" version="1.20">bcftools</requirement>
		<requirement type="package" version="1.10">samtools</requirement>
	</requirements>
	<command><![CDATA[
		ln -s ${sv_vcf} sample_sv.vcf;
		ln -s ${cnv_vcf} sample_cnv.vcf;

        bgzip -c sample_sv.vcf > sample_sv.vcf.gz;
        bcftools index -t sample_sv.vcf.gz;
		bgzip -c sample_cnv.vcf > sample_cnv.vcf.gz;
		bcftools index -t sample_cnv.vcf.gz;

		bcftools concat -O v -o ${sv_cnv_concat} -a sample_sv.vcf.gz sample_cnv.vcf.gz &> log.out;

		sed -i'' -e 's/<DIP>/./g' ${sv_cnv_concat}
	]]>
	</command>
	<inputs>
        <param name="sample_id" type="text" label="Sample ID"/>
		<param name="sv_vcf" type="data" format="vcf" label="SNV/Indel VCF"/>
        <param name="cnv_vcf" type="data" format="vcf" label="CNV VCF"/>
	</inputs>

	<outputs>
        <data name="sv_cnv_concat" format="vcf" label="${sample_id}_concat: vcf"/>
	</outputs>

	<help></help>
</tool>

