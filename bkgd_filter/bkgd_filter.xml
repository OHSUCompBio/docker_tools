<tool id="bkgd_filter" name="BKGD Filter" version="1.0.0" >
  <description>Filter variants in a VCF based on background threshold.</description>

  <requirements>
      <requirement type="package" version="0.13.3">vcfpy</requirement>
  </requirements>

  <command><![CDATA[
    python $__tool_directory__/bkgd_filter.py
    '${input_vcf}'
    '${output_vcf}'
    '${filter_id}'
    '${filter_desc}'
    #if $callers
      --callers '${callers}'
    #end if
    #if $fc_label
      --fc_label '${fc_label}'
    #end if
    #if $filter_on
      --filter_on '${filter_on}'
    #end if
    #if $filter_from
      --filter_from "${filter_from}"
    #end if
    #if $threshold
      --threshold '${threshold}'
    #end if
    #if $filter_on_alt_allele
      --filter_on_alt_allele '${filter_on_alt_allele}'
    #end if
    #if $compare_on_alt_allele
      --compare_on_alt_allele '${compare_on_alt_allele}'
    #end if
  ]]></command>

  <inputs>
    <param name="input_vcf" type="data" format="vcf" label="Input VCF" />
    <param name="filter_id" type="text" label="FILTER ID to add to VCF record" />
    <param name="filter_desc" type="text" label="FILTER Description to add to VCF header" />
    <param name="callers" type="text" label="Callers in a merged VCF" />
    <param name="fc_label" type="text" label="Forced calls label" />
    <param name="filter_on" type="text" label="VCF FORMAT field ID to filter on" />
    <param name="filter_from" type="text" label="VCF INFO field ID to filter on. If not given, threshold argument must be given" />
    <param name="threshold" type="float" value="0.1" min="0" max="1.0" optional="true"
           label="Threshold to filter filter_on field from."
           help="Threshold at which filter_on must be under to perform filtering.
           If filter_from is not given, threshold to filter filter_on on."/>
    <param name="filter_on_alt_allele" type="boolean" truevalue="--filter_on_alt_allele" falsevalue=""
           label="Select filter_on field of ALT allele e.g BE_A or BE_G" />
    <param name="compare_on_alt_allele" type="boolean" truevalue="--compare_on_alt_allele" falsevalue=""
           label="Select filter_on and filter_from of ALT allele e.g BE_A or BE_G" />
  </inputs>

  <outputs>
    <data name="output_vcf" format="vcf" label="${tool.name} on ${on_string}: VCF" />
  </outputs>

  <help>
    Filter variants in a VCF based on background threshold.
  </help>

  <tests> </tests>

  <citations> </citations>

</tool>