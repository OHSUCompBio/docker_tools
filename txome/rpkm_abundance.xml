<tool id="rpkm_abundance" name="RPKM Abundance table generator" version="0.0.1" >
    <description>Generate abundance tables and metadata tables for downstream analysis</description>

    <requirements>
        <requirement type="package" version="4.0.16">bioconductor-edger</requirement>
        <requirement type="package" version="1.22.0">bioconductor-singscore</requirement>
        <requirement type="package" version="1.50.0">bioconductor-gsva</requirement>
        <requirement type="package" version="1.48.0">bioconductor-cqn</requirement>
        <requirement type="package" version="2.0.0">r-tidyverse</requirement>
        <requirement type="package" version="3.4.0">r-ggplot2</requirement>
        <requirement type="package" version="1.1.2">r-patchwork</requirement>
        <requirement type="package" version="1.14.6">r-data.table</requirement>
        <requirement type="package" version="0.6.0">r-ggpubr</requirement>
        <requirement type="package" version="0.9.6">r-ggrepel</requirement>
        <requirement type="package" version="2.1.6">r-cluster</requirement>
        <requirement type="package" version="2.2.1">r-ggally</requirement>
        <requirement type="package" version="1.3.0">r-scales</requirement>
    </requirements>

    <command detect_errors="exit_code"><![CDATA[
       Rscript $__tool_directory__/rpkm_abundance.R ${gene_info} ${counts} ${new_counts} ${meta} ${new_meta} ${rpkm_uhr_lot1} ${rpkm_uhr_lot2} ${rpkm_tumor}
    ]]></command>

    <inputs>
        <param name="gene_info" type="data" format="rdata" label="Gene info" help=""/>
        <param name="counts" type="data" format="csv" label="" help="Sample data"/>
        <param name="new_counts" type="data" format="csv" label="additional sample data" help=""/>
        <param name="meta" type="data" format="csv" label="" help="meta data"/>
        <param name="new_meta" type="data" format="csv" label="" help="additional meta data"/>
    </inputs>

    <outputs>
        <data name="rpkm_uhr_lot1" format="csv" label="rpkm_uhr_lot1: csv"/>
        <data name="rpkm_uhr_lot2" format="csv" label="rpkm_uhr_lot2: csv"/>
        <data name="rpkm_uhr_tumor" format="csv" label="rpkm_uhr_tumor: csv"/>
    </outputs>

    <tests>
      <test>
      </test>
    </tests>

    <help><![CDATA[
    ]]></help>

    <citations>
    </citations>
</tool>
