<tool id="var_filter" name="Variant Filter" version="@VERSION@.0" >
  <description>Filter variants in a VCF based on INFO field.</description>

  <macros>
    <import>vcf_tools_macros.xml</import>
  </macros>
  <expand macro="requirements" />
  <expand macro="version_command" />

  <command><![CDATA[
    python $__tool_directory__/var_filter.py
    "${input_vcf}"
    --filter_from "${filter_from}"
    --filter_on "${filter_on}"
    "${output_vcf}"
    #if $alt_allele
      --alt_allele '${alt_allele}'
    #end if
    && cat filtered_out.vcf > $output2_vcf
  ]]></command>

  <inputs>
    <param name="input_vcf" type="data" format="vcf" label="Input VCF" />
    <param name="filter_from" type="text" label="INFO field to filter from" />
    <param name="filter_on" type="text" label="FORMAT field to filter on" />
    <param name="alt_allele" type="boolean" truevalue="--alt_allele" falsevalue="" label="Select filter fields based on ALT field" />
  </inputs>

  <outputs>
    <data name="output_vcf" format="vcf" label="${tool.name} on ${on_string}: VCF" />
    <data name="output2_vcf" format="vcf" label="${tool.name} on ${on_string}: Below threshold VCF" />
  </outputs>

  <help>
    Filter variants in a VCF based on INFO field.
  </help>

  <tests> </tests>

  <citations> </citations>

</tool>
